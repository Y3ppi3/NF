# Север-Рыба: Учет товаров

## Установка зависимостей
```
pip install -r requirements.txt
```

## Запуск программы
```
python main.py
```

## Функциональность
- Просмотр списка товаров
- Добавление новых товаров
- Обновление данных
- Локальная база данных SQLite

## Дополнительно
Можно собрать `.exe` с помощью `PyInstaller`:
```
pyinstaller --onefile --windowed main.py
```
# Интеграция между АИС и клиентским приложением "Север-Рыба"

Данная документация описывает компоненты для интеграции между административной информационной системой (АИС) и клиентским приложением "Север-Рыба". Интеграция позволяет синхронизировать данные между системами, получать аналитическую информацию и управлять заказами клиентов.

## Содержание

1. [Установка компонентов](#установка-компонентов)
2. [Структура компонентов](#структура-компонентов)
3. [Настройка API Gateway](#настройка-api-gateway)
4. [Интеграционные компоненты](#интеграционные-компоненты)
5. [Маршрутизация](#маршрутизация)
6. [Запуск системы](#запуск-системы)
7. [Устранение неполадок](#устранение-неполадок)

## Установка компонентов

### Предварительные требования

- Node.js 18+ и npm
- Python 3.9+ с установленным FastAPI и uvicorn
- PostgreSQL 14+
- Git

### Шаги установки

1. Склонируйте репозиторий:
```bash
git clone https://github.com/yourusername/NF.git
cd NF
```

2. Установите зависимости для API Gateway:
```bash
cd api-gateway
pip install -r requirements.txt
cd ..
```

3. Установите зависимости для фронтенда АИС:
```bash
cd ais/ais-frontend
npm install
cd ../..
```

4. Установите зависимости для бэкенда АИС:
```bash
cd ais/ais-backend
pip install -r requirements.txt
cd ../..
```

5. Установите зависимости для фронтенда клиентского приложения:
```bash
cd Sever-Fish/frontend
npm install
cd ../..
```

6. Установите зависимости для бэкенда клиентского приложения:
```bash
cd Sever-Fish/backend
pip install -r requirements.txt
cd ../..
```

## Структура компонентов

Интеграционные компоненты разделены на следующие основные части:

1. **API Gateway** - центральный компонент, отвечающий за маршрутизацию запросов между системами.
2. **Компоненты АИС** - компоненты для административной панели:
   - OrderDetail - компонент для просмотра и редактирования заказов
   - AnalyticsDashboard - компонент для отображения аналитики продаж
   - SyncPage - компонент для синхронизации данных между системами
3. **API интеграции** - эндпоинты, обеспечивающие обмен данными между системами.

## Настройка API Gateway

API Gateway является ключевым компонентом для обмена данными между системами. Для настройки необходимо:

1. Создать или изменить файл `.env` в директории `api-gateway` со следующим содержимым:
```
API_GATEWAY_PORT=8080
SEVER_RYBA_API=http://localhost:8000
AIS_API=http://localhost:8001
```

2. Убедиться, что маршруты в `api-gateway/main.py` соответствуют вашей инфраструктуре.

## Интеграционные компоненты

### OrderDetail

Компонент `OrderDetail` (`ais/ais-frontend/src/pages/OrderDetail.tsx`) позволяет просматривать детальную информацию о заказах из клиентского приложения и обновлять их статусы.

Для работы с компонентом:
1. Добавьте компонент в структуру проекта
2. Убедитесь, что маршрут `/orders/:orderId` настроен в `App.tsx`
3. Настройте доступ к API в компоненте

### AnalyticsDashboard

Компонент `AnalyticsDashboard` (`ais/ais-frontend/src/pages/AnalyticsDashboard.tsx`) отображает аналитику продаж из клиентского приложения в виде графиков и статистики.

Для работы с компонентом:
1. Добавьте компонент в структуру проекта
2. Убедитесь, что маршрут `/analytics` настроен в `App.tsx`
3. При необходимости настройте источники данных для аналитики

### SyncPage

Компонент `SyncPage` (`ais/ais-frontend/src/pages/SyncPage.tsx`) предоставляет интерфейс для управления синхронизацией данных между системами.

Для работы с компонентом:
1. Добавьте компонент в структуру проекта
2. Убедитесь, что маршрут `/sync` настроен в `App.tsx`
3. Настройте задачи синхронизации в соответствии с потребностями

## Маршрутизация

Для интеграции компонентов в АИС необходимо настроить соответствующие маршруты в `ais/ais-frontend/src/App.tsx`:

```tsx
<Routes>
    {/* Другие маршруты */}
    
    <Route
        path="orders/:orderId"
        element={token ? <OrderDetail /> : <Navigate to="/login" replace />}
    />
    
    <Route
        path="analytics"
        element={token ? <AnalyticsDashboard /> : <Navigate to="/login" replace />}
    />
    
    <Route
        path="sync"
        element={token ? <SyncPage /> : <Navigate to="/login" replace />}
    />
</Routes>
```

Также необходимо добавить соответствующие пункты меню в компонент SideBar (`ais/ais-frontend/src/components/SideBar.tsx`).

## Запуск системы

Для запуска всей системы можно использовать батник `simple-start-all.bat` (для Windows) или следующие команды:

1. Запустите API Gateway:
```bash
cd api-gateway
python -m uvicorn main:app --host 0.0.0.0 --port 8080 --reload
```

2. Запустите бэкенд клиентского приложения:
```bash
cd Sever-Fish/backend
python -m uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

3. Запустите бэкенд АИС:
```bash
cd ais/ais-backend
python -m uvicorn app.main:app --host 0.0.0.0 --port 8001 --reload
```

4. Запустите фронтенд клиентского приложения:
```bash
cd Sever-Fish/frontend
npm run dev
```

5. Запустите фронтенд АИС:
```bash
cd ais/ais-frontend
npm run dev
```

## Устранение неполадок

### Проблемы с API Gateway
- Проверьте доступность бэкенд-серверов
- Проверьте настройки CORS
- Проверьте логи API Gateway в файле `api_gateway.log`

### Проблемы с компонентами интеграции
- Проверьте консоль браузера на наличие ошибок
- Проверьте правильность URL API в запросах
- Проверьте, что токен аутентификации передается в запросах

### Проблемы с маршрутизацией
- Убедитесь, что маршруты правильно настроены в `App.tsx`
- Проверьте, что компоненты импортированы корректно

### Проблемы с синхронизацией данных
- Проверьте доступность API бэкенд-серверов
- Проверьте формат данных для синхронизации
- Проверьте, что у API Gateway есть доступ к обоим серверам

В случае других проблем, обратитесь к логам серверов и клиентских приложений для получения дополнительной информации.